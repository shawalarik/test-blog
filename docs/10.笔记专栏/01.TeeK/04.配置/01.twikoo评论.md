---
title: twikooè¯„è®º
date: 2025-02-16 01:47:07
permalink: /twikoo
categories:
  - twikoo
tags:
  - twikoo
coverImg: /home/bg10.webp
---

## ç‰ˆæƒ

::: tip æç¤º
æœ¬æ–‡æ˜¯åœ¨ åšä¸»[One](https://onedayxyy.cn/) æ–‡ç« ï¼š[ã€Šé…ç½® twikoo è¯„è®ºç³»ç»Ÿã€‹](https://onedayxyy.cn/teeker-twikoo) åŸºç¡€ä¸Šå¢åŠ äº†è‡ªå·±å®è·µè¿‡ç¨‹çš„ä¸€äº›ç»†èŠ‚ï¼Œè½¬è½½æ— éœ€å’Œæˆ‘è”ç³»ï¼Œä½†è¯·æ³¨æ˜æ–‡ç« æ¥æºã€‚å¦‚æœä¾µæƒä¹‹å¤„ï¼Œè¯·è”ç³»åšä¸»è¿›è¡Œåˆ é™¤ï¼Œè°¢è°¢~
:::

## Twikoo çš„å®‰è£…

å®˜ç½‘ï¼šhttps://twikoo.js.org

Twikoo æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼šäº‘å‡½æ•°ï¼ŒVercelï¼Œç§æœ‰éƒ¨ç½²ã€Docker.... å…·ä½“å‚è§æ–‡æ¡£ï¼šhttps://twikoo.js.org/backend.html

â€ æœ€åŸå§‹çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œæ­¥éª¤å¾ˆç®€å•ï¼šå®‰è£… node â†’ å®‰è£… tkserver â†’ å¯åŠ¨ã€‚

```sh
$ npm i -g tkserver

$ ln -s /opt/nodejs/node/bin/tkserver /usr/local/bin/tkserver

$ tkserver
```

ç„¶åå°±å¯ä»¥è®¿é—®äº†ï¼Œåœ°å€æ˜¯ï¼š`http://æœåŠ¡ç«¯IP:8080`

![1739612290655](https://seasir.top/images/1739612290655.jpg)

Linux æœåŠ¡å™¨å¯ä»¥ç”¨ `nohup tkserver >> tkserver.log 2>&1 &` å‘½ä»¤åå°å¯åŠ¨ã€‚

::: tip æç¤º
å¯èƒ½éœ€è¦åœ¨äº‘æœåŠ¡å™¨ä¸Šå¼€å¯ 8080 ç«¯å£çš„é˜²ç«å¢™
:::

è¿˜æ˜¯æ¨èç”¨ Docker æ¥éƒ¨ç½²ã€‚æˆ‘ä¹‹å‰æ˜¯ç”¨ç§æœ‰éƒ¨ç½²ï¼Œå‡ å¹´åæƒ³å‡çº§ Twikooï¼Œä½†æ˜¯å› ä¸º node ç‰ˆæœ¬å¤ªè€äº†ï¼Œå¯¼è‡´å‡çº§å¤±è´¥... ç„¶åè¯•ç€å‡çº§ nodeï¼Œåˆæ˜¯ä¸€å †æŠ¥é”™...

### docker éƒ¨ç½² ğŸ˜œ

```sh
docker run --name twikoo -e TWIKOO_THROTTLE=1000 -p 8080:8080 -v ${PWD}/data:/app/data -d imaegoo/twikoo
```

docker-compose.yaml å†…å®¹ï¼š

```yaml
version: "3"
services:
  twikoo:
    image: imaegoo/twikoo
    container_name: twikoo
    restart: unless-stopped
    ports:
      - 8080:8080
    environment:
      TWIKOO_THROTTLE: 1000
    volumes:
      - ./data:/app/data
```

è‡ªå·±å®é™…éƒ¨ç½²ï¼šğŸ˜œ

- åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªåä¸º `twikoo` çš„ Docker å®¹å™¨

```sh
docker run --name twikoo -e TWIKOO_THROTTLE=1000 -p 8426:8080 -v ${PWD}/data:/app/data -d imaegoo/twikoo
```

ï¼Œå¹¶åœ¨å…¶ä¸­ç”Ÿæˆäº†ä¸€ä¸ª `docker-compose.yaml` æ–‡ä»¶

```sh
# åˆ›å»ºåä¸º `twikoo` çš„ç›®å½•
mkdir /root/twikoo
# åˆ›å»ºdocker-compose.yaml æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹
cat >>/root/twikoo/docker-compose.yaml <<EOF
version: '3'
services:
  twikoo:
    image: imaegoo/twikoo
    container_name: twikoo
    restart: unless-stopped
    ports:
      - 8426:8080
    environment:
      TWIKOO_THROTTLE: 1000
    volumes:
      - ./data:/app/data
EOF

# è¿›å…¥è¯¥ç›®å½•
cd /root/twikoo
# æ£€æŸ¥ 8080 ç«¯å£æ˜¯å¦å·²ç»è¢«å…¶ä»–è¿›ç¨‹å ç”¨
netstat -antlp|grep 8080
# å¯åŠ¨twikooé•œåƒæœåŠ¡
docker-compose  up -d
[+] Building 0.0s (0/0)                                                                                                  docker:default
[+] Running 2/2
 âœ” Network twikoo_default  Created                                                                                                 0.0s
 âœ” Container twikoo        Started                                                                                                 0.0s
 [root@VM-4-16-centos twikoo]# docker ps -l
CONTAINER ID   IMAGE            COMMAND                   CREATED          STATUS          PORTS                                       NAMES
dc43659872fe   imaegoo/twikoo   "docker-entrypoint.sâ€¦"   56 minutes ago   Up 56 minutes   0.0.0.0:8426->8080/tcp, :::8426->8080/tcp   twikoo
[root@VM-4-16-centos twikoo]#
```

::: tip æç¤º
[å®˜æ–¹æ–‡æ¡£](https://twikoo.js.org/backend.html#%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2-docker)
:::

==Twikoo ç›®å½•ç»“æ„==

åœ¨ç§æœ‰éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½ æ‰§è¡Œ tkserver çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨å½“å‰ç›®å½•åˆ›å»ºï¼š

- data æ–‡ä»¶å¤¹ï¼šå­˜æ”¾è¯„è®ºæ•°æ®ã€é…ç½®ç­‰
- tkserver.logï¼šæ—¥å¿—æ–‡ä»¶

å› æ­¤ï¼Œæœ‰å¿…è¦åœ¨ä½ è‡ªå·±æŒ‡å®šçš„ç›®å½•ä¸‹å¯åŠ¨ tkserverï¼Œæ–¹ä¾¿åæœŸçš„æ•°æ®å¤‡ä»½ã€æ—¥å¿—åˆ†æç­‰ã€‚

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Dockerï¼Œåœ¨ä¸Šè¿°å‘½ä»¤é‡Œå…¶å®ä¹Ÿç”¨äº† `${PWD}/data` æ¥æŒ‡å®šæ•°æ®æ–‡ä»¶çš„ç›®å½•ï¼Œè¯·è‡ªè¡Œé€‰æ‹©ã€‚

```sh{2,4}
[root@VM-4-16-centos twikoo]# ls
data  docker-compose.yaml
[root@VM-4-16-centos twikoo]# ls data/
db.json  db.json.0  db.json.1  db.json.2
[root@VM-4-16-centos twikoo]#
```

## é…ç½® HTTPS

ç†è®ºä¸Šè¿™æ ·éƒ¨ç½²ï¼Œå°±å®Œæˆåå°çš„éƒ¨åˆ†äº†ï¼Œ**ä½†é‰´äºæˆ‘çš„ç½‘ç«™ç”¨äº† HTTPSï¼Œè€Œ Twikoo æœ¬èº«å¹¶ä¸æ”¯æŒï¼Œå› æ­¤è¿˜éœ€è¦åšåå‘ä»£ç†**ã€‚

æˆ‘è¿™é‡Œé…ç½® HTTPS æ˜¯ç”¨åˆ°[cloudflare](https://dash.cloudflare.com)

- è¿›å…¥[cloudflare](https://dash.cloudflare.com/a9d21f407514e204238da710be47c992/seasir.top/dns/records),åœ¨ã€è´¦æˆ·ä¸»é¡µã€‘æ‰¾åˆ°æ‚¨çš„åŸŸåç‚¹å‡»è¿›å»ï¼ˆå¦‚æœæ²¡æœ‰è¯·æ·»åŠ åŸŸåï¼‰ï¼Œè¿›å»åæ‰¾åˆ° DNS è®°å½•ï¼Œæ·»åŠ äºŒçº§åŸŸå
  - ç±»å‹ï¼šA
  - åç§°ï¼štwikoo(è‡ªå®šä¹‰å°±è¡Œ)
  - IPv4ï¼šå¡«å†™æœåŠ¡å™¨çš„ IP

![image-20250215181017931](https://seasir.top/images/image-20250215181017931.png)

## é…ç½® Nginx åå‘ä»£ç†

```nginx{7}
upstream twi {
   server peterjxl.com:8080; #ä½ çš„åŸŸå+åŠ ç«¯å£
}

server {
    listen  443 ssl;
    server_name  twikoo.peterjxl.com; #å­åŸŸå
    ssl_certificate  /opt/nginxrun/conf/cert/8852603_twikoo.peterjxl.com.pem;
    ssl_certificate_key /opt/nginxrun/conf/cert/8852603_twikoo.peterjxl.com.key;

    # ssl_session_cache    shared:SSL:1m;
    ssl_session_timeout  5m;

    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;
    ssl_prefer_server_ciphers  on;

    location / {
	proxy_pass http://twi;
    }
}
```

è‡ªå·±å®é™…é…ç½® ğŸ˜œ

```nginx{2,4,9,16,19}
# è¿›å…¥è¯¥ç›®å½•
cd /etc/nginx/conf.d/
# åˆ›å»ºæ–‡ä»¶
vim twikoo.seasir.top.conf

[root@VM-4-16-centos conf.d]#  cat twikoo.seasir.top.conf
server {
    listen 80;
    server_name  twikoo.seasir.top;
    #é…ç½®httpsé‡å®šå‘
    return 301 https://$host$request_uri;
}

server {
    listen  443 ssl;
    server_name  twikoo.seasir.top;

    location / {
        proxy_pass http://äº‘æœåŠ¡å™¨ip:8080/; # å®é™…çš„åå°è·¯å¾„
        client_max_body_size 100M;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    access_log /var/log/nginx/photo.onedayxyy.cn.https.log;
}

# ç”¨äºæµ‹è¯• Nginx é…ç½®æ–‡ä»¶çš„è¯­æ³•æ˜¯å¦æ­£ç¡®
nginx -t
```

é…ç½®å®Œæˆåéœ€è¦é‡å¯ NGINX æœåŠ¡

```sh
nginx -s reload
```

è¿™æ ·ï¼Œè®¿é—® https://twikoo.seasir.top/ï¼Œå°±ä¼šè½¬å‘åˆ°æˆ‘çš„æœåŠ¡å™¨ IP:8080 ï¼Œå®Œæˆåå‘ä»£ç†

![image-20250215182647730](https://seasir.top/images/image-20250215182647730.png)

## å‰ç«¯é…ç½® Twikoo

- ç¼–è¾‘ `Demo\docs-base\.vitepress\config.mts`æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼š

```ts{6}
  comment: {
    // provider: "giscus",
    provider: "twikoo",
    options: {
      // twikoo é…ç½®ï¼Œå®˜ç½‘ï¼šhttps://twikoo.js.org/
      envId: "å¡«å†™æ‚¨è‡ªå·±çš„twikooåŸŸå",
      jsUrl: "https://cdn.staticfile.org/twikoo/1.6.42/twikoo.all.min.js",
    },
  },
```

## éªŒè¯

```sh
pnpm domo:base dev
```
